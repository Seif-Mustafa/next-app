(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[682],{5753:function(e,t,r){Promise.resolve().then(r.bind(r,6467))},6467:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return g}});var s=r(9268),a=r(3702),o=r(8298),i=r(8176),l=r(6486),d=r(315),c=r(5942),n=r(6006),u=r(4046),p=r(8711),m=r(4390);let h={getCategories:()=>fetch("/crm/administration-product/get-all-categories",{method:"GET"}).then(async e=>{if(!e.ok){let t=await e.text().catch(()=>"No error details");throw Error("HTTP error! Status: ".concat(e.status,", Details: ").concat(t))}let t=await e.json();return t.data}).catch(e=>{throw console.error("Error in getCategories:",e),e}),postCategories:e=>fetch("/crm/administration-product/submit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e).replace("products","productsDTOS")}).then(e=>{if(!e.ok)throw Error("HTTP error! Status: ".concat(e.status));return e.json()}).then(e=>console.log(e)),putCategories:e=>fetch("/crm/administration-product/update",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e[0]).replace("products","productsDTOS")}).then(e=>{if(!e.ok)throw Error("HTTP error! Status: ".concat(e.status));return e.json()}).then(e=>console.log(e)),deleteCategories:e=>fetch("/crm/administration-product/deleteAll",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({createdBy:"admin",categoryIds:e})}).then(e=>{if(!e.ok)throw Error("HTTP error! Status: ".concat(e.status));return e.json()}).then(e=>console.log(e))};var g=()=>{let e={productCategoryId:void 0,productCategoryName:"",productCategoryDesc:"",createdBy:"",createdOn:new Date,modifiedBy:void 0,modifiedOn:void 0,isDeleted:"N",products:[]},t={productId:void 0,productName:"",productDesc:"",vendorId:void 0,createdBy:"",createdOn:new Date,modifiedBy:void 0,modifiedOn:void 0,isDeleted:"N",standardPrice:0,commissionPct:0,validity:"2028-01-27",isActive:"Y"},[r,g]=(0,n.useState)(!1),[y,x]=(0,n.useState)(!1),[v,f]=(0,n.useState)(!1),[j,C]=(0,n.useState)(e),[N,b]=(0,n.useState)(t),[P,S]=(0,n.useState)([]),[D,w]=(0,n.useState)([]),[E,k]=(0,n.useState)([]),[T,I]=(0,n.useState)([]),[A,O]=(0,n.useState)([]),[z,F]=(0,n.useState)(!1),[B,H]=(0,n.useState)(!1),_=(0,n.useRef)(null);(0,n.useEffect)(()=>{Promise.all([h.getCategories()]).then(e=>{let[t]=e;t&&Array.isArray(t)?S(t):S([])}).catch(e=>{console.error("Error loading data:",e)}).finally(()=>{})},[]);let R=()=>{let e={};P.forEach(t=>e["".concat(t.productCategoryId)]=!0),O(e),H(!0)},V=()=>{O([]),H(!1)},J=(0,s.jsx)(a.z,{icon:B?"pi pi-minus":"pi pi-plus",label:B?"Collapse All":"Expand All",onClick:()=>{B?V():R()},className:"w-11rem"}),K=()=>{C(e),b(t),f(!1),g(!0)},U=async()=>{var e,t,r;try{let r=[];E.length>0&&r.push(h.postCategories(E)),T.length>0&&r.push(h.putCategories(T)),D.length>0&&r.push(h.deleteCategories(D)),r.length>0?(await Promise.all(r),null===(e=_.current)||void 0===e||e.show({severity:"success",summary:"Success",detail:"All Changes Saved Successfully",life:3e3}),S(await h.getCategories()),k([]),I([]),w([])):null===(t=_.current)||void 0===t||t.show({severity:"warn",summary:"No Changes",detail:"There were no changes to save",life:3e3})}catch(e){console.error("Error saving changes:",e),null===(r=_.current)||void 0===r||r.show({severity:"error",summary:"Error",detail:"Failed to save changes",life:3e3})}},G=()=>{f(!1),g(!1)},L=()=>{x(!1)},Y=async()=>{if(f(!0),j.productCategoryId){let e=P.findIndex(e=>e.productCategoryId===j.productCategoryId);-1!==e&&(P[e]=j);let t=T.findIndex(e=>e.productCategoryId===j.productCategoryId);-1!==t?T[t]=j:I(e=>[...e,j])}else{var e;j.productCategoryId=P.length>0?Math.min(...P.map(t=>(null!==(e=t.productCategoryId)&&void 0!==e?e:-1)||-1))-1:-1,j.createdBy="admin",j.createdOn=new Date,j.isDeleted="N",k(e=>[...e,j]),S(e=>[...e,j])}g(!1)},X=(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.z,{label:"Cancel",icon:"pi pi-times",text:!0,onClick:G}),(0,s.jsx)(a.z,{label:"Save",icon:"pi pi-check",text:!0,onClick:Y})]}),M=(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.z,{label:"Cancel",icon:"pi pi-times",text:!0,onClick:L}),(0,s.jsx)(a.z,{label:"Save",icon:"pi pi-check",text:!0,onClick:()=>{N.createdBy="admin",N.createdOn=new Date,N.isDeleted="N",N.isActive="Y",j.products.push(N),x(!1),b(t)}})]}),W=(e,t)=>{let r=e.target&&e.target.value||"",s={...j};s.productCategoryName=r,C(s)},q=(e,t)=>{let r=e.target&&e.target.value||"",s={...N};s.productName=r,b(s)},Q=(e,t)=>{let r=e.target&&e.target.value||"",s={...j};s.productCategoryDesc=r,C(s)},Z=(e,t)=>{let r=e.target&&e.target.value||"",s={...N};s.productDesc=r,b(s)},$=(e,t,r)=>{let s=e.value||0,a={...N};"standardPrice"===t?a.standardPrice=s:"commissionPct"===t&&(a.commissionPct=s),b(a)},ee=e=>{C({...e}),g(!0)},et=e=>{C(e),F(!0)},er=()=>{F(!1)},es=(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.z,{label:"No",icon:"pi pi-times",text:!0,onClick:er}),(0,s.jsx)(a.z,{label:"Yes",icon:"pi pi-check",text:!0,onClick:()=>{var t;j&&(j.productCategoryId>0&&w(e=>[...e,j.productCategoryId]),S(e=>e.filter(e=>e.productCategoryId!==j.productCategoryId)),k(e=>e.filter(e=>e.productCategoryId!==j.productCategoryId))),F(!1),C(e),null===(t=_.current)||void 0===t||t.show({severity:"success",summary:"Successful",detail:"Category Deleted",life:3e3})}})]});return(0,s.jsx)("div",{className:"grid",children:(0,s.jsx)("div",{className:"col-12",children:(0,s.jsxs)("div",{className:"card",children:[(0,s.jsx)(u.F,{ref:_}),(0,s.jsx)(p.o,{className:"mb-4",start:()=>(0,s.jsx)(n.Fragment,{children:(0,s.jsxs)("div",{className:"my-2",children:[(0,s.jsx)(a.z,{label:"Add",icon:"pi pi-plus",severity:"success",className:" mr-2",onClick:K}),(0,s.jsx)(a.z,{label:"Save",icon:"pi pi-save",severity:"success",className:" mr-2",onClick:U})]})})}),(0,s.jsx)("h5",{children:"Categories"}),(0,s.jsxs)(i.w,{value:P,expandedRows:A,onRowToggle:e=>O(e.data),responsiveLayout:"scroll",rowExpansionTemplate:e=>(0,s.jsxs)("div",{className:"orders-subtable",children:[(0,s.jsxs)("h5",{children:["Products for ",e.productCategoryName]}),(0,s.jsxs)(i.w,{value:e.products,responsiveLayout:"scroll",children:[(0,s.jsx)(o.s,{field:"productName",header:"Name",sortable:!0}),(0,s.jsx)(o.s,{field:"productDesc",header:"Description",sortable:!0}),(0,s.jsx)(o.s,{field:"standardPrice",header:"Standard Price",sortable:!0}),(0,s.jsx)(o.s,{field:"commissionPct",header:"Commission Pct",sortable:!0}),(0,s.jsx)(o.s,{field:"validity",header:"Validity",sortable:!0})]})]}),dataKey:"productCategoryId",header:J,children:[(0,s.jsx)(o.s,{expander:!0,style:{width:"3em"}}),(0,s.jsx)(o.s,{field:"productCategoryName",header:"Name",sortable:!0}),(0,s.jsx)(o.s,{field:"productCategoryDesc",header:"Description",sortable:!0}),(0,s.jsx)(o.s,{field:"createdBy",header:"Description",sortable:!0}),(0,s.jsx)(o.s,{field:"createdOn",header:"Date",style:{minWidth:"200px"},body:e=>new Date(e.createdOn).toLocaleDateString()}),(0,s.jsx)(o.s,{body:e=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.z,{icon:"pi pi-pencil",rounded:!0,severity:"success",className:"mr-2",onClick:()=>ee(e)}),(0,s.jsx)(a.z,{icon:"pi pi-trash",rounded:!0,severity:"warning",onClick:()=>et(e)})]}),headerStyle:{minWidth:"10rem"}})]}),(0,s.jsx)(m.V,{visible:r,style:{width:"800px"},header:"Add Category",modal:!0,className:"p-fluid",footer:X,onHide:G,children:(0,s.jsx)("div",{className:"grid",children:(0,s.jsx)("div",{className:"formgrid ",children:(0,s.jsxs)("div",{className:"col-12",children:[(0,s.jsxs)("div",{className:"card",children:[(0,s.jsx)("h5",{children:"Category Data"}),(0,s.jsxs)("div",{className:"field",children:[(0,s.jsx)("label",{htmlFor:"name",children:"Category Name"}),(0,s.jsx)(d.o,{id:"name",value:j.productCategoryName,onChange:e=>W(e,"productCategoryName"),className:(0,c.AK)({"p-invalid":v&&!j.productCategoryDesc})})]}),(0,s.jsxs)("div",{className:"field",children:[(0,s.jsx)("label",{htmlFor:"name",children:"Category Description"}),(0,s.jsx)(d.o,{id:"description",value:j.productCategoryDesc,onChange:e=>Q(e,"productCategoryDesc"),className:(0,c.AK)({"p-invalid":v&&!j.productCategoryDesc})})]})]}),(0,s.jsx)("div",{className:"card",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("h5",{children:"Products"}),(0,s.jsx)(a.z,{label:"Add Product",icon:"pi pi-check",text:!0,onClick:()=>{b(t),x(!0)}}),(0,s.jsx)("div",{className:"orders-subtable",children:(0,s.jsxs)(i.w,{value:j.products,responsiveLayout:"scroll",children:[(0,s.jsx)(o.s,{field:"productName",header:"Name",sortable:!0}),(0,s.jsx)(o.s,{field:"productDesc",header:"Description",sortable:!0}),(0,s.jsx)(o.s,{field:"standardPrice",header:"Standard Price",sortable:!0}),(0,s.jsx)(o.s,{field:"commissionPct",header:"Commission Pct",sortable:!0}),(0,s.jsx)(o.s,{field:"validity",header:"validity",sortable:!0})]})})]})})]})})})}),(0,s.jsx)(m.V,{visible:y,style:{width:"500px"},header:"Add Product",modal:!0,className:"p-fluid",footer:M,onHide:L,children:(0,s.jsx)("div",{className:"grid",children:(0,s.jsx)("div",{className:"formgrid ",children:(0,s.jsx)("div",{className:"col-12",children:(0,s.jsxs)("div",{className:"card",children:[(0,s.jsx)("h5",{children:"Product Data"}),(0,s.jsxs)("div",{className:"field",children:[(0,s.jsx)("label",{htmlFor:"name",children:"Product Name"}),(0,s.jsx)(d.o,{id:"prodName",value:N.productName,onChange:e=>q(e,"productName"),className:(0,c.AK)({"p-invalid":v&&!N.productName})})]}),(0,s.jsxs)("div",{className:"field",children:[(0,s.jsx)("label",{htmlFor:"name",children:"Product Description"}),(0,s.jsx)(d.o,{id:"prodDesc",value:N.productDesc,onChange:e=>Z(e,"productDesc"),className:(0,c.AK)({"p-invalid":v&&!N.productDesc})})]}),(0,s.jsxs)("div",{className:"field",children:[(0,s.jsx)("label",{htmlFor:"prodStandardPrice",children:"Product Standard Price"}),(0,s.jsx)(l.R,{id:"prodStandardPrice",value:N.standardPrice,onValueChange:e=>$(e,"standardPrice","standardPrice"),mode:"currency",currency:"USD",locale:"en-US"})]}),(0,s.jsxs)("div",{className:"field",children:[(0,s.jsx)("label",{htmlFor:"prodCommissionPct",children:"Product Commission Price"}),(0,s.jsx)(l.R,{id:"prodCommissionPct",value:N.commissionPct,onValueChange:e=>$(e,"commissionPct","commissionPct"),mode:"currency",currency:"USD",locale:"en-US"})]})]})})})})}),(0,s.jsx)(m.V,{visible:z,style:{width:"450px"},header:"Confirm",modal:!0,footer:es,onHide:er,children:(0,s.jsxs)("div",{className:"flex align-items-center justify-content-center",children:[(0,s.jsx)("i",{className:"pi pi-exclamation-triangle mr-3",style:{fontSize:"2rem"}}),j&&(0,s.jsxs)("span",{children:["Are you sure you want to delete this category (",j.productCategoryName,") ?"]})]})})]})})})}},8711:function(e,t,r){"use strict";r.d(t,{o:function(){return d}});var s=r(6006),a=r(3142),o=r(5942),i=r(6878),l=i.V.extend({defaultProps:{__TYPE:"Toolbar",id:null,style:null,className:null,left:null,right:null,start:null,center:null,end:null,children:void 0},css:{classes:{root:function(e){var t=e.props;return(0,o.AK)("p-toolbar p-component",t.className)},start:"p-toolbar-group-start p-toolbar-group-left",center:"p-toolbar-group-center",end:"p-toolbar-group-end p-toolbar-group-right"},styles:"\n        @layer primereact {\n            .p-toolbar {\n                display: flex;\n                align-items: center;\n                justify-content: space-between;\n                flex-wrap: wrap;\n            }\n            \n            .p-toolbar-group-start,\n            .p-toolbar-group-center,\n            .p-toolbar-group-end {\n                display: flex;\n                align-items: center;\n            }\n            \n            .p-toolbar-group-left,\n            .p-toolbar-group-right {\n                display: flex;\n                align-items: center;\n            }\n        }\n        "}}),d=s.memo(s.forwardRef(function(e,t){var r=s.useContext(a.Ou),d=l.getProps(e,r),c=s.useRef(null),n=o.gb.getJSXElement(d.left||d.start,d),u=o.gb.getJSXElement(d.center,d),p=o.gb.getJSXElement(d.right||d.end,d),m=l.setMetaData({props:d}),h=m.ptm,g=m.cx,y=m.isUnstyled;(0,i.e)(l.css.styles,y,{name:"toolbar"}),s.useImperativeHandle(t,function(){return{props:d,getElement:function(){return c.current}}});var x=(0,o.dG)({className:g("start")},h("start")),v=(0,o.dG)({className:g("center")},h("center")),f=(0,o.dG)({className:g("end")},h("end")),j=(0,o.dG)({id:d.id,ref:c,style:d.style,className:g("root"),role:"toolbar"},l.getOtherProps(d),h("root"));return s.createElement("div",j,s.createElement("div",x,n),s.createElement("div",v,u),s.createElement("div",f,p))}));d.displayName="Toolbar"}},function(e){e.O(0,[8123,434,6878,9424,543,8285,9683,3081,6486,7633,6986,6324,4959,4046,4390,9253,5769,1744],function(){return e(e.s=5753)}),_N_E=e.O()}]);